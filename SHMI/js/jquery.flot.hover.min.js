(function(q){var B=q.plot.browser;q.plot.plugins.push({init:function(e){function t(a){var c=e.getOptions(),b=new CustomEvent("mouseevent");b.pageX=a.detail.changedTouches[0].pageX;b.pageY=a.detail.changedTouches[0].pageY;b.clientX=a.detail.changedTouches[0].clientX;b.clientY=a.detail.changedTouches[0].clientY;c.grid.hoverable&&l(b,"hover",30);return!1}function l(a,c,b){var d=e.getData();if(void 0!==a&&0<d.length&&void 0!==d[0].xaxis.c2p&&void 0!==d[0].yaxis.c2p){var f=c+"able";u("plot"+c,a,function(a){return!1!==
d[a][f]},b)}}function v(a){k=a;e.getPlaceholder()[0].lastMouseMoveEvent=a;l(a,"hover")}function w(a){k=void 0;e.getPlaceholder()[0].lastMouseMoveEvent=void 0;u("plothover",a,function(a){return!1})}function x(a){l(a,"click")}function n(){e.unhighlight();e.getPlaceholder().trigger("plothovercleanup")}function u(a,c,b,d){var f=e.getOptions(),g=e.offset(),r=B.getPageXY(c),m=r.X-g.left,p=r.Y-g.top;c=e.c2p({left:m,top:p});d=void 0!==d?d:f.grid.mouseActiveRadius;c.pageX=r.X;c.pageY=r.Y;if(b=e.findNearbyItem(m,
p,b,d))b.pageX=parseInt(b.series.xaxis.p2c(b.datapoint[0])+g.left,10),b.pageY=parseInt(b.series.yaxis.p2c(b.datapoint[1])+g.top,10);if(f.grid.autoHighlight){for(f=0;f<h.length;++f)g=h[f],(g.auto!==a||b&&g.series===b.series&&g.point[0]===b.datapoint[0]&&g.point[1]===b.datapoint[1])&&b||y(g.series,g.point);b&&z(b.series,b.datapoint,a)}e.getPlaceholder().trigger(a,[c,b])}function z(a,c,b){"number"===typeof a&&(a=e.getData()[a]);if("number"===typeof c){var d=a.datapoints.pointsize;c=a.datapoints.points.slice(d*
c,d*(c+1))}d=A(a,c);-1===d?(h.push({series:a,point:c,auto:b}),e.triggerRedrawOverlay()):b||(h[d].auto=!1)}function y(a,c){if(null==a&&null==c)h=[],e.triggerRedrawOverlay();else{"number"===typeof a&&(a=e.getData()[a]);if("number"===typeof c){var b=a.datapoints.pointsize;c=a.datapoints.points.slice(b*c,b*(c+1))}b=A(a,c);-1!==b&&(h.splice(b,1),e.triggerRedrawOverlay())}}function A(a,c){for(var b=0;b<h.length;++b){var d=h[b];if(d.series===a&&d.point[0]===c[0]&&d.point[1]===c[1])return b}return-1}function C(){n();
l(k,"hover")}function D(){l(k,"hover")}function E(a,c,b){b=a.getPlotOffset();c.save();c.translate(b.left,b.top);for(b=0;b<h.length;++b){var d=h[b];if(d.series.bars.show)F(d.series,d.point,c);else{var f=d.series,g=d.point;d=c;var e=a,m=g[0];g=g[1];var p=f.xaxis,l=f.yaxis,k="string"===typeof f.highlightColor?f.highlightColor:q.color.parse(f.color).scale("a",.5).toString();if(!(m<p.min||m>p.max||g<l.min||g>l.max)){var n=f.points.radius+f.points.lineWidth/2;d.lineWidth=n;d.strokeStyle=k;k=1.5*n;m=p.p2c(m);
g=l.p2c(g);d.beginPath();f=f.points.symbol;if("circle"===f)d.arc(m,g,k,0,2*Math.PI,!1);else if("string"===typeof f&&e.drawSymbol&&e.drawSymbol[f])e.drawSymbol[f](d,m,g,k,!1);d.closePath();d.stroke()}}}c.restore()}function F(a,c,b){var d="string"===typeof a.highlightColor?a.highlightColor:q.color.parse(a.color).scale("a",.5).toString(),f=a.bars.barWidth[0]||a.bars.barWidth;switch(a.bars.align){case "left":var g=0;break;case "right":g=-f;break;default:g=-f/2}b.lineWidth=a.bars.lineWidth;b.strokeStyle=
d;var e=a.bars.fillTowards||0;e=e>a.yaxis.min?Math.min(a.yaxis.max,e):a.yaxis.min;q.plot.drawSeries.drawBar(c[0],c[1],c[2]||e,g,g+f,function(){return d},a.xaxis,a.yaxis,b,a.bars.horizontal,a.bars.lineWidth)}var k,h=[];e.hooks.bindEvents.push(function(a,c){var b=a.getOptions();if(b.grid.hoverable||b.grid.clickable)c[0].addEventListener("touchevent",n,!1),c[0].addEventListener("tap",t,!1);b.grid.clickable&&c.bind("click",x);b.grid.hoverable&&(c.bind("mousemove",v),c.bind("mouseleave",w))});e.hooks.shutdown.push(function(a,
c){c[0].removeEventListener("tap",t);c[0].removeEventListener("touchevent",n);c.unbind("mousemove",v);c.unbind("mouseleave",w);c.unbind("click",x);h=[]});e.hooks.processOptions.push(function(a,c){a.highlight=z;a.unhighlight=y;if(c.grid.hoverable||c.grid.clickable)a.hooks.drawOverlay.push(E),a.hooks.processDatapoints.push(C),a.hooks.setupGrid.push(D);k=a.getPlaceholder()[0].lastMouseMoveEvent})},options:{grid:{hoverable:!1,clickable:!1}},name:"hover",version:"0.1"})})(jQuery);