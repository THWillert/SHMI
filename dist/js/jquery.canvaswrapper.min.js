(function(q){function r(b,c){b.transform.baseVal.clear();c&&c.forEach(function(a){b.transform.baseVal.appendItem(a)})}var n=function(b,c){var a=c.getElementsByClassName(b)[0];if(!a&&(a=document.createElement("canvas"),a.className=b,a.style.direction="ltr",a.style.position="absolute",a.style.left="0px",a.style.top="0px",c.appendChild(a),!a.getContext))throw Error("Canvas is not available.");this.element=a;a=this.context=a.getContext("2d");this.pixelRatio=q.plot.browser.getPixelRatio(a);a=q(c).width();
var e=q(c).height();this.resize(a,e);this.SVGContainer=null;this.SVG={};this._textCache={}};n.prototype.resize=function(b,c){b=10>b?10:b;c=10>c?10:c;var a=this.element,e=this.context,g=this.pixelRatio;this.width!==b&&(a.width=b*g,a.style.width=b+"px",this.width=b);this.height!==c&&(a.height=c*g,a.style.height=c+"px",this.height=c);e.restore();e.save();e.scale(g,g)};n.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};n.prototype.render=function(){var b=this._textCache,
c;for(c in b)if(hasOwnProperty.call(b,c)){var a=this.getSVGLayer(c),e=b[c],g=a.style.display;a.style.display="none";for(var d in e)if(hasOwnProperty.call(e,d)){var h=e[d],k;for(k in h)if(hasOwnProperty.call(h,k)){for(var f=h[k],l=f.positions,p=0,m;l[p];p++)if(m=l[p],m.active)m.rendered||(a.appendChild(m.element),m.rendered=!0);else if(l.splice(p--,1),m.rendered){for(;m.element.firstChild;)m.element.removeChild(m.element.firstChild);m.element.parentNode.removeChild(m.element)}0===l.length&&(f.measured?
f.measured=!1:delete h[k])}}a.style.display=g}};n.prototype.getSVGLayer=function(b){var c=this.SVG[b];if(!c){if(this.SVGContainer)var a=this.SVGContainer.firstChild;else this.SVGContainer=document.createElement("div"),this.SVGContainer.className="flot-svg",this.SVGContainer.style.position="absolute",this.SVGContainer.style.top="0px",this.SVGContainer.style.left="0px",this.SVGContainer.style.height="100%",this.SVGContainer.style.width="100%",this.SVGContainer.style.pointerEvents="none",this.element.parentNode.appendChild(this.SVGContainer),
a=document.createElementNS("http://www.w3.org/2000/svg","svg"),a.style.width="100%",a.style.height="100%",this.SVGContainer.appendChild(a);c=document.createElementNS("http://www.w3.org/2000/svg","g");c.setAttribute("class",b);c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.bottom="0px";c.style.right="0px";a.appendChild(c);this.SVG[b]=c}return c};n.prototype.getTextInfo=function(b,c,a,e,g){c=""+c;var d="object"===typeof a?a.style+" "+a.variant+" "+a.weight+" "+a.size+"px/"+
a.lineHeight+"px "+a.family:a;var h=this._textCache[b];null==h&&(h=this._textCache[b]={});e=h[d];null==e&&(e=h[d]={});h=c.replace(/0|1|2|3|4|5|6|7|8|9/g,"0");var k=e[h];if(!k){var f=document.createElementNS("http://www.w3.org/2000/svg","text");-1!==c.indexOf("<br>")?t(c,f,-9999):(c=document.createTextNode(c),f.appendChild(c));f.style.position="absolute";f.style.maxWidth=g;f.setAttributeNS(null,"x",-9999);f.setAttributeNS(null,"y",-9999);"object"===typeof a?(f.style.font=d,f.style.fill=a.fill):"string"===
typeof a&&f.setAttribute("class",a);this.getSVGLayer(b).appendChild(f);b=f.getBBox();for(k=e[h]={width:b.width,height:b.height,measured:!0,element:f,positions:[]};f.firstChild;)f.removeChild(f.firstChild);f.parentNode.removeChild(f)}k.measured=!0;return k};n.prototype.addText=function(b,c,a,e,g,d,h,k,f,l){b=this.getTextInfo(b,e,g,d,h);g=b.positions;"center"===k?c-=b.width/2:"right"===k&&(c-=b.width);"middle"===f?a-=b.height/2:"bottom"===f&&(a-=b.height);a+=.75*b.height;for(f=0;g[f];f++){d=g[f];if(d.x===
c&&d.y===a&&d.text===e){d.active=!0;r(d.element,l);return}if(!1===d.active){d.active=!0;d.text=e;-1!==e.indexOf("<br>")?(a-=.25*b.height,t(e,d.element,c)):d.element.textContent=e;d.element.setAttributeNS(null,"x",c);d.element.setAttributeNS(null,"y",a);d.x=c;d.y=a;r(d.element,l);return}}d={active:!0,rendered:!1,element:g.length?b.element.cloneNode():b.element,text:e,x:c,y:a};g.push(d);-1!==e.indexOf("<br>")?(a-=.25*b.height,t(e,d.element,c)):d.element.textContent=e;d.element.setAttributeNS(null,"x",
c);d.element.setAttributeNS(null,"y",a);d.element.style.textAlign=k;r(d.element,l)};var t=function(b,c,a){b=b.split("<br>");var e;for(e=0;e<b.length;e++){if(c.childNodes[e])var g=c.childNodes[e];else g=document.createElementNS("http://www.w3.org/2000/svg","tspan"),c.appendChild(g);g.textContent=b[e];var d=1*e+"em";g.setAttributeNS(null,"dy",d);g.setAttributeNS(null,"x",a)}};n.prototype.removeText=function(b,c,a,e,g,d){var h;if(null==e){if(b=this._textCache[b],null!=b)for(var k in b)if(hasOwnProperty.call(b,
k)){g=b[k];for(var f in g)hasOwnProperty.call(g,f)&&(d=g[f].positions,d.forEach(function(a){a.active=!1}))}}else{var l=this.getTextInfo(b,e,g,d);d=l.positions;d.forEach(function(b){h=a+.75*l.height;b.x===c&&b.y===h&&b.text===e&&(b.active=!1)})}};n.prototype.clearCache=function(){var b=this._textCache,c;for(c in b)if(hasOwnProperty.call(b,c))for(var a=this.getSVGLayer(c);a.firstChild;)a.removeChild(a.firstChild);this._textCache={}};window.Flot||(window.Flot={});window.Flot.Canvas=n})(jQuery);