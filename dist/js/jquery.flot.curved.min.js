(function(s){s.plot.plugins.push({init:function(u){function v(p,a,c){var b=c.points.length/c.pointsize;if(!0==a.curvedLines.apply&&void 0===a.originSeries&&1.5<b)if(a.lines.fill){var f=t(c,a.curvedLines,1),g=t(c,a.curvedLines,2);c.pointsize=3;c.points=[];for(var h=0,e=0,b=0;b<f.length||h<g.length;)f[b]==g[h]?(c.points[e]=f[b],c.points[e+1]=f[b+1],c.points[e+2]=g[h+1],h+=2,b+=2):f[b]<g[h]?(c.points[e]=f[b],c.points[e+1]=f[b+1],c.points[e+2]=0<e?c.points[e-1]:null,b+=2):(c.points[e]=g[h],c.points[e+ 1]=1<e?c.points[e-2]:null,c.points[e+2]=g[h+1],h+=2),e+=3;if(0<a.lines.lineWidth){c=s.extend({},a);c.lines=s.extend({},a.lines);c.lines.fill=void 0;c.label=void 0;c.datapoints=s.extend({},a.datapoints);c.datapoints.points=f;c.datapoints.pointsize=2;c.curvedLines.apply=!1;f=p.getData();for(b=0;b<f.length;b++)if(f[b]==a){p.getData().splice(b+1,0,c);break}a.lines.lineWidth=0}}else 0<a.lines.lineWidth&&(c.points=t(c,a.curvedLines,1),c.pointsize=2)}function t(p,a,c){var b=p.points,f=p.pointsize;p=b.length/ f*a.curvePointFactor;var g=[],h=[],e=-1,m=-1,d=0;if(a.fit){var l;l="undefined"==typeof a.fitPointDist?(b[b.length-f]-b[0])/5E4:a.fitPointDist;for(a=0;a<b.length;a+=f){var n,k,e=a,m=a+c;n=b[e]-l;k=b[e]+l;for(var q=2;n==b[e]||k==b[e];)n=b[e]-l*q,k=b[e]+l*q,q++;g[d]=n;h[d]=b[m];d++;g[d]=b[e];h[d]=b[m];d++;g[d]=k;h[d]=b[m];d++}}else for(a=0;a<b.length;a+=f)e=a,m=a+c,g[d]=b[e],h[d]=b[m],d++;c=g.length;b=[];f=[];b[0]=0;b[c-1]=0;f[0]=0;for(a=1;a<c-1;++a){d=g[a+1]-g[a-1];if(0==d)return[];d=(g[a]-g[a-1])/ d;e=d*b[a-1]+2;b[a]=(d-1)/e;f[a]=(h[a+1]-h[a])/(g[a+1]-g[a])-(h[a]-h[a-1])/(g[a]-g[a-1]);f[a]=(6*f[a]/(g[a+1]-g[a-1])-d*f[a-1])/e}for(d=c-2;0<=d;--d)b[d]=b[d]*b[d+1]+f[d];a=(g[c-1]-g[0])/(p-1);f=[];e=[];m=[];f[0]=g[0];e[0]=h[0];m.push(f[0]);m.push(e[0]);for(d=1;d<p;++d){f[d]=f[0]+d*a;l=c-1;for(n=0;1<l-n;)k=Math.round((l+n)/2),g[k]>f[d]?l=k:n=k;k=g[l]-g[n];if(0==k)return[];var q=(g[l]-f[d])/k,r=(f[d]-g[n])/k;e[d]=q*h[n]+r*h[l]+((q*q*q-q)*b[n]+(r*r*r-r)*b[l])*k*k/6;m.push(f[d]);m.push(e[d])}return m} u.hooks.processOptions.push(function(p,a){a.series.curvedLines.active&&p.hooks.processDatapoints.unshift(v)})},options:{series:{curvedLines:{active:!1,apply:!1,fit:!1,curvePointFactor:20,fitPointDist:void 0}}},name:"curvedLines",version:"0.5"})})(jQuery);
