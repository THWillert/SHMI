(function(x){x.plot.drawSeries=new function(){function y(a,f,h,l,b,t,d,g,r,c,e){var k,u;if(c){var v=k=u=!0;var w=!1;c=h;h=f+l;b=f+b;a<c&&(f=a,a=c,c=f,w=!0,k=!1)}else w=k=u=!0,v=!1,c=a+l,a+=b,b=h,h=f,h<b&&(f=h,h=b,b=f,v=!0,u=!1);a<d.min||c>d.max||h<g.min||b>g.max||(c<d.min&&(c=d.min,w=!1),a>d.max&&(a=d.max,k=!1),b<g.min&&(b=g.min,v=!1),h>g.max&&(h=g.max,u=!1),c=d.p2c(c),b=g.p2c(b),a=d.p2c(a),h=g.p2c(h),t&&(r.fillStyle=t(b,h),r.fillRect(c,h,a-c,b-h)),0<e&&(w||k||u||v)&&(r.beginPath(),r.moveTo(c,b),
w?r.lineTo(c,h):r.moveTo(c,h),u?r.lineTo(a,h):r.moveTo(a,h),k?r.lineTo(a,b):r.moveTo(a,b),v?r.lineTo(c,b):r.moveTo(c,b),r.stroke()))}function B(a,f,h,l,b){var t=a.fill;if(!t)return null;if(a.fillColor)return b(a.fillColor,h,l,f);a=x.color.parse(f);a.a="number"===typeof t?t:.4;a.normalize();return a.toString()}this.drawSeriesLines=function(a,f,h,l,b,t,d){f.save();f.translate(h.left,h.top);f.lineJoin="round";a.lines.dashes&&f.setLineDash&&f.setLineDash(a.lines.dashes);t=a.datapoints.points;h=a.datapoints.pointsize;
a.decimate&&(t=a.decimate(a,a.xaxis.min,a.xaxis.max,l,a.yaxis.min,a.yaxis.max,b));l=a.lines.lineWidth;f.lineWidth=l;f.strokeStyle=a.color;if(b=B(a.lines,a.color,0,b,d)){f.fillStyle=b;b=a.xaxis;d=a.yaxis;var g=a.lines.fillTowards||0,r=a.lines.steps,c=t,e=h;g=g>d.min?Math.min(d.max,g):d.min;for(var k=0,u=1,v=!1,w=0,C=0,z=null,A=null;!(0<e&&k>c.length+e);){k+=e;var m=c[k-e],n=c[k-e+u],p=c[k],q=c[k+u];-2===e&&(n=q=g);if(v){if(0<e&&null!=m&&null==p){C=k;e=-e;u=2;continue}if(0>e&&k===w+e){f.fill();v=!1;
e=-e;u=1;k=w=C+e;continue}}if(null==m||null==p)A=z=null;else{r&&(null!==z&&null!==A?(p=m,q=n,m=z,n=A,A=z=null,k-=e):n!==q&&m!==p&&(q=n,z=p,A=n));if(m<=p&&m<b.min){if(p<b.min)continue;n=(b.min-m)/(p-m)*(q-n)+n;m=b.min}else if(p<=m&&p<b.min){if(m<b.min)continue;q=(b.min-m)/(p-m)*(q-n)+n;p=b.min}if(m>=p&&m>b.max){if(p>b.max)continue;n=(b.max-m)/(p-m)*(q-n)+n;m=b.max}else if(p>=m&&p>b.max){if(m>b.max)continue;q=(b.max-m)/(p-m)*(q-n)+n;p=b.max}v||(f.beginPath(),f.moveTo(b.p2c(m),d.p2c(g)),v=!0);if(n>=
d.max&&q>=d.max)f.lineTo(b.p2c(m),d.p2c(d.max)),f.lineTo(b.p2c(p),d.p2c(d.max));else if(n<=d.min&&q<=d.min)f.lineTo(b.p2c(m),d.p2c(d.min)),f.lineTo(b.p2c(p),d.p2c(d.min));else{var x=m,y=p;n<=q&&n<d.min&&q>=d.min?(m=(d.min-n)/(q-n)*(p-m)+m,n=d.min):q<=n&&q<d.min&&n>=d.min&&(p=(d.min-n)/(q-n)*(p-m)+m,q=d.min);n>=q&&n>d.max&&q<=d.max?(m=(d.max-n)/(q-n)*(p-m)+m,n=d.max):q>=n&&q>d.max&&n<=d.max&&(p=(d.max-n)/(q-n)*(p-m)+m,q=d.max);m!==x&&f.lineTo(b.p2c(x),d.p2c(n));f.lineTo(b.p2c(m),d.p2c(n));f.lineTo(b.p2c(p),
d.p2c(q));p!==y&&(f.lineTo(b.p2c(p),d.p2c(q)),f.lineTo(b.p2c(y),d.p2c(q)))}}}}if(0<l){l=a.xaxis;b=a.yaxis;a=a.lines.steps;v=u=r=d=null;f.beginPath();for(w=h;w<t.length;w+=h)if(c=t[w-h],e=t[w-h+1],g=t[w],k=t[w+1],null===c||null===g)v=u=null;else if(isNaN(c)||isNaN(g)||isNaN(e)||isNaN(k))r=d=null;else{a&&(null!==u&&null!==v?(g=c,k=e,c=u,e=v,v=u=null,w-=h):e!==k&&c!==g&&(k=e,u=g,v=e));if(e<=k&&e<b.min){if(k<b.min)continue;c=(b.min-e)/(k-e)*(g-c)+c;e=b.min}else if(k<=e&&k<b.min){if(e<b.min)continue;g=
(b.min-e)/(k-e)*(g-c)+c;k=b.min}if(e>=k&&e>b.max){if(k>b.max)continue;c=(b.max-e)/(k-e)*(g-c)+c;e=b.max}else if(k>=e&&k>b.max){if(e>b.max)continue;g=(b.max-e)/(k-e)*(g-c)+c;k=b.max}if(c<=g&&c<l.min){if(g<l.min)continue;e=(l.min-c)/(g-c)*(k-e)+e;c=l.min}else if(g<=c&&g<l.min){if(c<l.min)continue;k=(l.min-c)/(g-c)*(k-e)+e;g=l.min}if(c>=g&&c>l.max){if(g>l.max)continue;e=(l.max-c)/(g-c)*(k-e)+e;c=l.max}else if(g>=c&&g>l.max){if(c>l.max)continue;k=(l.max-c)/(g-c)*(k-e)+e;g=l.max}c===d&&e===r||f.moveTo(l.p2c(c)+
0,b.p2c(e)+0);d=g;r=k;f.lineTo(l.p2c(g)+0,b.p2c(k)+0)}f.stroke()}f.restore()};this.drawSeriesPoints=function(a,f,h,l,b,t,d){function g(a,b,c,d,f,g){a.moveTo(b+d,c);a.arc(b,c,d,0,f?Math.PI:2*Math.PI,!1)}g.fill=!0;f.save();f.translate(h.left,h.top);h={format:a.datapoints.format,points:a.datapoints.points,pointsize:a.datapoints.pointsize};a.decimatePoints&&(h.points=a.decimatePoints(a,a.xaxis.min,a.xaxis.max,l,a.yaxis.min,a.yaxis.max,b));l=a.points.lineWidth;b=a.points.radius;var r=a.points.symbol,c;
"circle"===r?c=g:"string"===typeof r&&t&&t[r]?c=t[r]:"function"===typeof t&&(c=t);0===l&&(l=1E-4);f.lineWidth=l;f.fillStyle=B(a.points,a.color,null,null,d);f.strokeStyle=a.color;(function(a,b,c,d,g,h,l,r){var e=a.points;a=a.pointsize;f.beginPath();for(var k=0;k<e.length;k+=a){var p=e[k],q=e[k+1];null==p||p<h.min||p>h.max||q<l.min||q>l.max||(p=h.p2c(p),q=l.p2c(q)+d,r(f,p,q,b,g,c))}r.fill&&!g&&f.fill();f.stroke()})(h,b,!0,0,!1,a.xaxis,a.yaxis,c);f.restore()};this.drawSeriesBars=function(a,f,h,l,b,t,
d){f.save();f.translate(h.left,h.top);h={format:a.datapoints.format,points:a.datapoints.points,pointsize:a.datapoints.pointsize};a.decimate&&(h.points=a.decimate(a,a.xaxis.min,a.xaxis.max,l));f.lineWidth=a.bars.lineWidth;f.strokeStyle=a.color;b=a.bars.barWidth[0]||a.bars.barWidth;switch(a.bars.align){case "left":l=0;break;case "right":l=-b;break;default:l=-b/2}(function(b,d,c,e,k,h){var g=b.points;b=b.pointsize;var l=a.bars.fillTowards||0;l=l>h.min?Math.min(h.max,l):h.min;for(var r=0;r<g.length;r+=
b)null!=g[r]&&y(g[r],g[r+1],3===b?g[r+2]:l,d,c,e,k,h,f,a.bars.horizontal,a.bars.lineWidth)})(h,l,l+b,a.bars.fill?function(b,f){return B(a.bars,a.color,b,f,d)}:null,a.xaxis,a.yaxis);f.restore()};this.drawBar=y}})(jQuery);