(function(p){function u(f,b,a,c,g,d,m){var h=Math.pow,k=Math.sqrt;var e=k(h(a-f,2)+h(c-b,2));h=k(h(g-a,2)+h(d-c,2));e=m*e/(e+h);m-=e;return[a+e*(f-g),c+e*(b-d),a-m*(f-g),c-m*(b-d)]}function q(f,b,a,c){if(void 0===b||"bezier"!==b&&"quadratic"!==b)b="quadratic";b+="CurveTo";0==k.length?k.push([a[0],a[1],c.concat(a.slice(2)),b]):"quadraticCurveTo"==b&&2==a.length?(c=c.slice(0,2).concat(a),k.push([a[0],a[1],c,b])):k.push([a[2],a[3],c.concat(a.slice(2)),b])}function v(f,b,a){if(!0===a.splines.show){var c=
[],g=a.splines.tension||.5,d,m=a.datapoints.points,h=a.datapoints.pointsize,t=f.getPlotOffset(),e=m.length,n=[];k=[];if(4>e/h)p.extend(a.lines,a.splines);else{for(d=0;d<e;d+=h){var l=m[d];var r=m[d+1];null==l||l<a.xaxis.min||l>a.xaxis.max||r<a.yaxis.min||r>a.yaxis.max||n.push(a.xaxis.p2c(l)+t.left,a.yaxis.p2c(r)+t.top)}e=n.length;for(d=0;d<e-2;d+=2)c=c.concat(u.apply(this,n.slice(d,d+6).concat([g])));b.save();b.strokeStyle=a.color;b.lineWidth=a.splines.lineWidth;q(b,"quadratic",n.slice(0,4),c.slice(0,
2));for(d=2;d<e-3;d+=2)q(b,"bezier",n.slice(d,d+4),c.slice(2*d-2,2*d+2));q(b,"quadratic",n.slice(e-2,e),[c[2*e-10],c[2*e-9],n[e-4],n[e-3]]);c=k;f=f.height()+10;g=a.splines.fill;a=p.color.parse(a.color);a.a="number"==typeof g?g:.3;a.normalize();a=a.toString();b.beginPath();b.moveTo(c[0][0],c[0][1]);d=c.length;for(l=0;l<d;l++)b[c[l][3]].apply(b,c[l][2]);b.stroke();b.lineWidth=0;b.lineTo(c[d-1][0],f);b.lineTo(c[0][0],f);b.closePath();!1!==g&&(b.fillStyle=a,b.fill());b.restore()}}}var k=[];p.plot.plugins.push({init:function(f){f.hooks.drawSeries.push(v)},
options:{series:{splines:{show:!1,lineWidth:2,tension:.5,fill:!1}}},name:"spline",version:"0.8.2"})})(jQuery);