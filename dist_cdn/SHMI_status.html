<!DOCTYPE html>
<html lang=en>
<head profile=http://dublincore.org/documents/dcq-html/>
<title>SHMI - Status</title>
<meta http-equiv=content-type content="text/html; charset=UTF-8" />
<link rel=schema.DC href=http://purl.org/dc/elements/1.1/ />
<link rel=schema.DCTERMS href=http://purl.org/dc/terms/ />
<link rel=DC.Source href=https://github.com/THWillert/SHMI/blob/master/SHMI/SHMI_status.html>
<meta name=DC.format content=text/html />
<meta name=DC.type content=Text />
<meta name=DC.title content="Dublin Core" />
<meta name=DC.publisher content="Thorsten Willert" />
<meta name=DC.subject content="SHMI status page" />
<meta name=DC.creator content="Thorsten Willert" />
<meta name=DCTERMS.license content=https://github.com/THWillert/SHMI/blob/master/LICENSE />
<meta name=DCTERMS.rightsHolder content="Thorsten Willert" />
<meta name=DCTERMS.modified content=2020-02-16 />
<link rel=icon type=image/svg+xml href=./pict/logo.svg sizes=any>
<script src=https://code.jquery.com/jquery-3.4.1.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js integrity=sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6 crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/moment@2.24.0/moment.js integrity="sha256-H9jAz//QLkDOy/nzE9G4aYijQtkLt9FvGmdUTwBk6gs=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/peity@3.3.0/jquery.peity.min.js integrity="sha256-B+xyblmehefmEUu8NIsuz32NsVFta9t+Y/SpAy6noc4=" crossorigin=anonymous></script>
<link href=https://stackpath.bootstrapcdn.com/bootswatch/4.4.1/slate/bootstrap.min.css rel=stylesheet integrity=sha384-G9YbB4o4U6WS4wCthMOpAeweY4gQJyyx0P3nZbEBHyz+AtNoeasfRChmek1C2iqV crossorigin=anonymous>
<script src=./js/main.js></script>
<link rel=stylesheet type=text/css href=./css/SHMI.css>
<link rel=stylesheet type=text/css href=./css/SHMI_instruments.css>
<link rel=stylesheet type=text/css href=./css/SHMI_glow.css>
<script>
var PeakInterval=15E3,updateIntervalA=1E3,updateIntervalD=1E3;
$(function(){function g(){var b,a,c,d;parent.top.$("#IDdata").find("input").each(function(){b=this.value;a=this.id;c=$("#ID_"+a+"_D").css("opacity");c!=b&&$("#ID_"+a+"_D").css("opacity",b);d=moment.unix(parent.top.$("#"+a+"_TS_upd").val());$("#TS_"+a).text(d.format("ll HH:mm:ss"))});setTimeout(g,updateIntervalD+20)}function h(){var b,a,c,d,e;parent.top.$("#IDdata").find("input").each(function(){b=this.id;a=parseFloat(Round(this.value));$("#IDAnalogIO").find("."+b).each(function(){a=parseFloat(a).toFixed(2);
this.textContent!=a&&(this.textContent=a)});e=$("#ID_"+b+"_M").css("width");e!=a&&$("#ID_"+b+"_M").css("width",a+"%");e=$("#ID_"+b+"_M").css("width");e!=a&&$("#ID_"+b+"_SP").css("width",a+"%");c=$("#ID_"+b+"_PK");a>c.val()&&(c.val(a),$("#ID_"+b+"_P").css("width",c.val()+"%"));d=$("#ID_"+b+"_LO");parseFloat(a)<d.val()&&d.val(a);$("#ID_"+b+"_L").css("width",d.val()+"%")});setTimeout(h,updateIntervalA)}function k(b){var a,c;parent.top.$("#IDdata").find("input").each(function(){id=this.id;val=this.value;
a=$("#ID_"+id+"_spark").peity("line");"undefined"==typeof b?(c=a.text().split(","),c.shift(),c.push(parseInt(val)),a.text(c.join(",")).change()):a.text(b).change()});setTimeout(k,updateIntervalA+10)}function f(){var b;parent.top.$("#IDdata").find("input").each(function(){b=this.id;$("#ID_"+b+"_PK").val(Number.MIN_VALUE);$("#ID_"+b+"_LO").val(Number.MAX_VALUE)});setTimeout(f,PeakInterval)}var l=$("#ID_digital_in"),m=$("#ID_digital_out"),n=$("#ID_analog_in"),p=$("#ID_analog_out");moment.locale("de");
(function(){$.getJSON("./data/data.json",function(b){$.each(b,function(a,b){-1==a.indexOf("SP")&&(-1!=a.indexOf("DI")?l.append('<tr>\n\t\t\t\t\t\t\t\t\t<td id="TXT_'+a+'""></td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class="digi_IO">\n\t\t\t\t\t\t\t\t\t\t\t<span class="digi_back"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_'+a+'_D" class="digi_in">&nbsp;</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td id="TS_'+a+'" class="value_out"></td>\n\t\t\t\t\t\t\t\t</tr>'):
-1!=a.indexOf("DO")?m.append('<tr>\n\t\t\t\t\t\t\t\t\t<td id="TXT_'+a+'"></td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class="digi_IO">\n\t\t\t\t\t\t\t\t\t\t\t<span class="digi_back"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_'+a+'_D" class="digi_out">&nbsp;</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td id="TS_'+a+'" class="value_out"></td>\n\t\t\t\t\t\t\t\t</tr>'):-1!=a.indexOf("AI")&&-1==a.indexOf("SP")?n.append('<tr>\n\t\t\t\t\t\t\t\t\t<td width="200em" id="TXT_'+
a+'"></td>\n\t\t\t\t\t\t\t\t\t<td  class="value_out">\n\t\t\t\t\t\t\t\t\t\t<span class="'+a+'_SP"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="value_out value_big">\n\t\t\t\t\t\t\t\t\t\t<span class="'+a+'">0</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width="65%" style="padding-right: 1em;padding-left: 1em">\n\t\t\t\t\t\t\t\t\t\t<div class="progress">\n\t\t\t\t\t\t\t\t\t\t\t<div id="ID_'+a+'_M" class="progress-bar" role="progressbar"></div>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_'+
a+'_SP_SP" class="text-light progress-setpoint"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_'+a+'_P" class="progress-peak '+a+'_P"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_'+a+'_L" class="progress-low '+a+'_L"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td  class="d-none"><input id="ID_'+a+'_LO" ><input analog" id="ID_'+a+'_PK" ></td>\n\t\t\t\t\t\t\t\t\t<td class="d-none d-md-block sparkline"><span id="ID_'+a+'_spark" class="peity-ai chart-ai">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</span></td>\n\t\t\t\t\t\t\t\t</tr>'):
-1!=a.indexOf("AO")&&p.append('<tr>\n\t\t\t\t\t\t\t\t\t<td width="200em" id="TXT_'+a+'"></td>\n\t\t\t\t\t\t\t\t\t<td  class="value_out">\n\t\t\t\t\t\t\t\t\t\t<span class="'+a+'_SP"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="value_out value_big">\n\t\t\t\t\t\t\t\t\t\t<span class="'+a+'">0</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width="65%" style="padding-right: 1em;padding-left: 1em">\n\t\t\t\t\t\t\t\t\t\t<div class="progress">\n\t\t\t\t\t\t\t\t\t\t\t<div id="ID_'+
a+'_M" class="progress-bar" role="progressbar"></div>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_'+a+'_SP_SP" class="text-light progress-setpoint"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_'+a+'_P" class="progress-peak '+a+'_P"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_'+a+'_L" class="progress-low '+a+'_L"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="d-none"><input id="ID_'+a+'_LO" ><input id="ID_'+a+'_PK" ></td>\n\t\t\t\t\t\t\t\t\t<td class="d-none d-md-block sparkline"><span id="ID_'+
a+'_spark" class="peity-ao chart-ao">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</span></td>\n\t\t\t\t\t\t\t\t</tr>'))})}).done(function(){$.getJSON("./lng/de.json",function(b){$.each(b,function(a,b){$("#TXT_"+a).each(function(){$(this).text(b)})})});$.getJSON("./lng/de_dp.json",function(b){$.each(b,function(a,b){$("#TXT_"+a).each(function(){$(this).text(b)})})});$(".peity-ai").peity("line",{fill:["var(--sparkline_ai_fill)"],stroke:"var(--sparkline_ai_stroke)",strokeWidth:2,min:0,
max:100,width:128});$(".peity-ao").peity("line",{fill:["var(--sparkline_ao_fill)"],stroke:"var(--sparkline_ao_stroke)",strokeWidth:2,min:0,max:100,width:128})})})();$(function(){g()});$(function(){h()});$(function(){k()});$("#ID_PeakHold_Reset").click(function(){f()});$(function(){f()})});
</script>
</head>
<body class>
<div class="main container-fluid W100">
<div class="row p-2">
<div class="col-md-6 p-2" id=ID_DI>
<div class="card shadow">
<div class=card-header>
<a class data-toggle=collapse href=#collapseDI role=button aria-expanded=false aria-controls=collapseDI>
<div id=TXT_DI>DI</div>
</a>
</div>
<div class="card-body collapse show" id=collapseDI>
<table id=ID_digital_in></table>
</div>
</div>
</div>
<div class="col-md-6 p-2" id=ID_DO>
<div class="card shadow">
<div class=card-header>
<a class data-toggle=collapse href=#collapseDO role=button aria-expanded=false aria-controls=collapseDO>
<div id=TXT_DO>DO</div>
</a>
</div>
<div class="card-body collapse show" id=collapseDO>
<table id=ID_digital_out></table>
</div>
</div>
</div>
</div>
<div class="row p-2" id=IDAnalogIO>
<div class="col-md-12 p-2" ID=ID_AI>
<div class="card shadow">
<div class=card-header>
<a class data-toggle=collapse href=#collapseAI role=button aria-expanded=false aria-controls=collapseAI>
<div id=TXT_AI>AI</div>
</a>
</div>
<div class="card-body collapse show" id=collapseAI>
<table id=ID_analog_in>
<tr>
<th></th>
<th id=TXT_Setpoint_AI></th>
<th id=TXT_Value_AI></th>
<th id=ID_Scale_AI>
<div>
<table class=scale-table>
<tr>
<td class=scale style=width:5%></td>
<td class=scale>10</td>
<td class=scale><span class="d-none d-lg-block">20</span></td>
<td class=scale><span class="d-none d-sm-block">30</span></td>
<td class=scale><span class="d-none d-lg-block">40</span></td>
<td class=scale>50</td>
<td class=scale><span class="d-none d-lg-block">60</span></td>
<td class=scale><span class="d-none d-sm-block">70</span></td>
<td class=scale><span class="d-none d-lg-block">80</span></td>
<td class=scale>90</td>
<td class=scale style=width:5%></td>
</tr>
</table>
</div>
</th>
<th id=TXT_Peak_AI></th>
<th></th>
</tr>
</table>
</div>
</div>
</div>
<div class="col-md-12 p-2" ID=ID_AO>
<div class="card shadow">
<div class=card-header>
<a class data-toggle=collapse href=#collapseAO role=button aria-expanded=false aria-controls=collapseAO>
<div id=TXT_AO>AO</div>
</a>
</div>
<div class="card-body collapse show" id=collapseAO>
<table id=ID_analog_out>
<tr>
<th></th>
<th id=TXT_Setpoint_AO></th>
<th id=TXT_Value_AO></th>
<th id=ID_Scale_AO>
<div>
<table class=scale-table>
<tr>
<td class=scale style=width:5%></td>
<td class=scale>10</td>
<td class=scale><span class="d-none d-lg-block">20</span></td>
<td class=scale><span class="d-none d-sm-block">30</span></td>
<td class=scale><span class="d-none d-lg-block">40</span></td>
<td class=scale>50</td>
<td class=scale><span class="d-none d-lg-block">60</span></td>
<td class=scale><span class="d-none d-sm-block">70</span></td>
<td class=scale><span class="d-none d-lg-block">80</span></td>
<td class=scale>90</td>
<td class=scale style=width:5%></td>
</tr>
</table>
</div>
</th>
<th id=TXT_Peak_AO></th>
<th></th>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="row p-2">
<div class="col-md-7 p-2">
<div class="card shadow">
<div class=card-header>
<a class data-toggle=collapse href=#collapsePrefs role=button aria-expanded=false aria-controls=collapsePrefs>
<div id=TXT_Prefs>Settings</div>
</a>
</div>
<div class="card-body collapse" id=collapsePrefs>
<div class=container>
<h5 class=card-title id=TXT_Prefs_A>Analog</h5>
<div class="row p-1">
<div class=col id=TXT_Peak_Hold>
Peak / valley hold
</div>
<div class=col id=ID_Prefs_PeakHold>
<select class="form-control form-control-sm custom-select custom-select-sm" id=PeakInterval size=1 onChange="PeakInterval=this.value*1000">
<option value=86400>Hold</option>
<option value=5>5 sec.</option>
<option value=10>10 sec.</option>
<option value=15 selected>15 sec.</option>
<option value=20>20 sec.</option>
<option value=25>25 sec.</option>
<option value=30>30 sec.</option>
<option value=60>1 min.</option>
<option value=300>5 min.</option>
<option value=600>10 min.</option>
<option value=1800>30 min.</option>
</select>
</div>
<div class=col>
<button type=button class="btn btn-primary btn-sm col" id=ID_PeakHold_Reset>
Reset</button>
</div>
</div>
<div class="row p-1">
<div class=col id=TXT_Update_Interval>
Update Interval
</div>
<div class=col id=ID_Prefs_Ana_Digi>
<select class="form-control form-control-sm custom-select custom-select-sm" id=UpdateIntervalA size=1 onChange="updateIntervalA=this.value*1000">
<option value=1 selected>1 sec.</option>
<option value=2>2 sec.</option>
<option value=3>3 sec.</option>
<option value=4>4 sec.</option>
<option value=5>5 sec.</option>
<option value=10>10 sec.</option>
</select>
</div>
<div class=col>
</div>
</div>
<hr>
<h5 class=card-title id=TXT_Prefs_D>Digital</h5>
<div class="row p-1">
<div class=col>
Update Interval
</div>
<div class=col id=ID_Prefs_Digi_Int>
<select class="form-control form-control-sm custom-select custom-select-sm" id=UpdateIntervalD size=1 onChange="updateIntervalD=this.value*1000">
<option value=1 selected>1 sec.</option>
<option value=2>2 sec.</option>
<option value=3>3 sec.</option>
<option value=4>4 sec.</option>
<option value=5>5 sec.</option>
<option value=10>10 sec.</option>
</select>
</div>
<div class=col>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
