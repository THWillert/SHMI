let PeakInterval=15e3,updateIntervalA=1e3,updateIntervalD=1e3;$(()=>{const t=$("#ID_digital_in"),n=$("#ID_digital_out"),a=$("#ID_analog_in"),s=$("#ID_analog_out");function e(){let t,n,a,s;parent.top.$("#IDdata").find("input").each(function(){t=this.value,n=this.id,(a=$(`#ID_${n}_D`).css("opacity"))!=t&&$(`#ID_${n}_D`).css("opacity",t),s=moment.unix(parent.top.$(`#${n}_TS_upd`).val()),$(`#TS_${n}`).text(s.format("ll HH:mm:ss"))}),setTimeout(e,updateIntervalD+20)}function i(){let t,n,a,s,e;parent.top.$("#IDdata").find("input").each(function(){t=this.id,n=parseFloat(Round(this.value)),$("#IDAnalogIO").find("."+t).each(function(){n=parseFloat(n).toFixed(2),this.textContent!=n&&(this.textContent=n)}),(e=$(`#ID_${t}_M`).css("width"))!=n&&$(`#ID_${t}_M`).css("width",n+"%"),(e=$(`#ID_${t}_M`).css("width"))!=n&&$(`#ID_${t}_SP`).css("width",n+"%"),a=$(`#ID_${t}_PK`),n>a.val()&&(a.val(n),$(`#ID_${t}_P`).css("width",a.val()+"%")),s=$(`#ID_${t}_LO`),parseFloat(n)<s.val()&&s.val(n),$(`#ID_${t}_L`).css("width",s.val()+"%")}),setTimeout(i,updateIntervalA)}function d(t){let n,a;parent.top.$("#IDdata").find("input").each(function(){id=this.id,val=this.value,n=$(`#ID_${id}_spark`).peity("line"),void 0===t?((a=n.text().split(",")).shift(),a.push(parseInt(val)),n.text(a.join(",")).change()):n.text(t).change()}),setTimeout(d,updateIntervalA+10)}function l(){let t;parent.top.$("#IDdata").find("input").each(function(){t=this.id,$(`#ID_${t}_PK`).val(Number.MIN_VALUE),$(`#ID_${t}_LO`).val(Number.MAX_VALUE)}),setTimeout(l,PeakInterval)}moment.locale("de"),function(){let e="",i="",d="",l="";$.getJSON("./data/data.json",_=>{$.each(_,(t,n)=>{-1==t.indexOf("SP")&&(-1!=t.indexOf("DI")?e+=`<tr>\n\t\t\t\t\t\t\t\t\t<td id="TXT_${t}""></td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class="digi_IO">\n\t\t\t\t\t\t\t\t\t\t\t<span class="digi_back"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_${t}_D" class="digi_in">&nbsp;</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td id="TS_${t}" class="value_out"></td>\n\t\t\t\t\t\t\t\t</tr>`:-1!=t.indexOf("DO")?i+=`<tr>\n\t\t\t\t\t\t\t\t\t<td id="TXT_${t}"></td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div class="digi_IO">\n\t\t\t\t\t\t\t\t\t\t\t<span class="digi_back"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_${t}_D" class="digi_out">&nbsp;</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td id="TS_${t}" class="value_out"></td>\n\t\t\t\t\t\t\t\t</tr>`:-1!=t.indexOf("AI")&&-1==t.indexOf("SP")?d+=`<tr>\n\t\t\t\t\t\t\t\t\t<td width="200em" id="TXT_${t}"></td>\n\t\t\t\t\t\t\t\t\t<td  class="value_out">\n\t\t\t\t\t\t\t\t\t\t<span class="${t}_SP"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="value_out value_big">\n\t\t\t\t\t\t\t\t\t\t<span class="${t}">0</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width="65%" style="padding-right: 1em;padding-left: 1em">\n\t\t\t\t\t\t\t\t\t\t<div class="progress">\n\t\t\t\t\t\t\t\t\t\t\t<div id="ID_${t}_M" class="progress-bar" role="progressbar"></div>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_${t}_SP_SP" class="text-light progress-setpoint"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_${t}_P" class="progress-peak ${t}_P"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_${t}_L" class="progress-low ${t}_L"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td  class="d-none"><input id="ID_${t}_LO" ><input analog" id="ID_${t}_PK" ></td>\n\t\t\t\t\t\t\t\t\t<td class="d-none d-md-block sparkline"><span id="ID_${t}_spark" class="peity-ai chart-ai">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</span></td>\n\t\t\t\t\t\t\t\t</tr>`:-1!=t.indexOf("AO")&&(l+=`<tr>\n\t\t\t\t\t\t\t\t\t<td width="200em" id="TXT_${t}"></td>\n\t\t\t\t\t\t\t\t\t<td  class="value_out">\n\t\t\t\t\t\t\t\t\t\t<span class="${t}_SP"></span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="value_out value_big">\n\t\t\t\t\t\t\t\t\t\t<span class="${t}">0</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td width="65%" style="padding-right: 1em;padding-left: 1em">\n\t\t\t\t\t\t\t\t\t\t<div class="progress">\n\t\t\t\t\t\t\t\t\t\t\t<div id="ID_${t}_M" class="progress-bar" role="progressbar"></div>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_${t}_SP_SP" class="text-light progress-setpoint"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_${t}_P" class="progress-peak ${t}_P"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span id="ID_${t}_L" class="progress-low ${t}_L"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td class="d-none"><input id="ID_${t}_LO" ><input id="ID_${t}_PK" ></td>\n\t\t\t\t\t\t\t\t\t<td class="d-none d-md-block sparkline"><span id="ID_${t}_spark" class="peity-ao chart-ao">0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</span></td>\n\t\t\t\t\t\t\t\t</tr>`))}),""!=e&&(t.append(e),$("#ID_DI").removeClass("d-none")),""!=i&&(n.append(i),$("#ID_DO").removeClass("d-none")),""!=d&&(a.append(d),$("#ID_AI").removeClass("d-none")),""!=l&&(s.append(l),$("#ID_AO").removeClass("d-none")),$("#ID_prefs").removeClass("d-none")}).done(()=>{$.getJSON("./lng/de.json",t=>{$.each(t,(t,n)=>{$("#TXT_"+t).each(function(){$(this).text(n)})})}),$.getJSON("./lng/de_dp.json",t=>{$.each(t,(t,n)=>{$("#TXT_"+t).each(function(){$(this).text(n)})})}),$(".peity-ai").peity("line",{fill:["var(--sparkline_ai_fill)"],stroke:"var(--sparkline_ai_stroke)",strokeWidth:2,min:0,max:100,width:128}),$(".peity-ao").peity("line",{fill:["var(--sparkline_ao_fill)"],stroke:"var(--sparkline_ao_stroke)",strokeWidth:2,min:0,max:100,width:128})})}(),$(()=>{e()}),$(()=>{i()}),$(()=>{d()}),$("#ID_PeakHold_Reset").click(()=>{l()}),$(()=>{l()})});